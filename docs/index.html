<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Dr. Stephen Quigley - Clinical Psychologist offering compassionate, evidence-based psychological services for adults and children." />
    <meta name="author" content="Dr. Stephen Quigley" />
    <title>Dr. Stephen Quigley - Clinical Psychologist</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* Enhanced styles that preserve your existing colors */
        .masthead {
            padding-top: 8rem;
            padding-bottom: 8rem;
            min-height: 600px;
        }
        
        .about-text-content {
            color: #fff;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            max-width: 90%;
        }
        
        #about-text p {
            font-size: 1.15rem;
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }
        
        .welcome-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            background-color: var(--kq-greenLight);
            color: var(--kq-green);
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .cta-button {
            display: inline-block;
            background-color: var(--kq-green);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            font-weight: 600;
            text-decoration: none;
            margin-top: 1rem;
            transition: background-color 0.3s ease;
        }
        
        .cta-button:hover {
            background-color: var(--kq-greenDark);
            color: white;
            text-decoration: none;
        }
        
        /* Features Section */
        .features-section {
            padding: 5rem 0;
            background-color: #f8f9fa;
        }
        
        .section-title {
            text-align: center;
            color: var(--kq-green);
            font-family: 'Lora', serif;
            font-size: 2.2rem;
            margin-bottom: 1rem;
        }
        
        .section-subtitle {
            text-align: center;
            color: #555;
            max-width: 700px;
            margin: 0 auto 3rem;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .feature-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 2rem;
            height: 100%;
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
        }
        
        .feature-icon {
            font-size: 2rem;
            color: var(--kq-green);
            margin-bottom: 1rem;
        }
        
        .feature-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 0.8rem;
            font-family: 'Lora', serif;
        }
        
        .feature-content {
            color: #555;
            font-size: 1rem;
            line-height: 1.6;
        }
        
        /* Loading spinner */
        .loading-spinner {
            display: inline-block;
            width: 2rem;
            height: 2rem;
            border: 0.25rem solid rgba(46, 125, 50, 0.2);
            border-top-color: var(--kq-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Profile image styles */
        .profile-img {
            border-radius: 50%;
            width: 250px;
            height: 250px;
            object-fit: cover;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border: 4px solid white;
            margin-bottom: 2rem;
        }
        
        .profile-container {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }
        
        /* New two-column layout styles */
        .hero-content {
            display: flex;
            align-items: center;
            gap: 3rem;
        }
        
        .hero-text {
            flex: 1;
        }
        
        .hero-image {
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Responsive adjustments */
        @media(max-width:768px) {
            .masthead {
                padding-top: 6rem;
                padding-bottom: 6rem;
                min-height: 500px;
            }
            
            .about-text-content {
                max-width: 100%;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .profile-img {
                width: 200px;
                height: 200px;
            }
            
            .hero-content {
                flex-direction: column;
                gap: 2rem;
            }
            
            .hero-text {
                order: 2;
            }
            
            .hero-image {
                order: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Include header -->
    <div id="header-placeholder"></div>
    
    <!-- Masthead/Hero Section -->
    <header class="masthead" style="background-image: linear-gradient(to right, var(--kq-green), rgba(46, 125, 50, 0.2) 50%, transparent), url('assets/img/home.jpg');">
        <div class="container position-relative px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5">  
                <div class="col-12">
                    <div class="hero-content">
                        <!-- Text content on the left -->
                        <div class="hero-text">
                            <div class="site-heading text-start"> 
                                <h1 style="font-size: 2.6rem; color: white; margin-bottom: 1.5rem;">Dr. Stephen Quigley</h1>
                                
                                <div id="about-text" class="about-text-content mt-4">
                                    <div id="loading-about" class="text-center">
                                        <div class="loading-spinner"></div>
                                        <p class="mt-2">Loading content...</p>
                                    </div>
                                    <div id="about-content" style="display: none;"></div>
                                    <div id="about-fallback" style="display: none;">
                                        <p>My name is Stephen, and I've worked for over a decade as a clinical psychologist with adults and children in both public and private settings. Like many people who find their way into this field, my path hasn't been a straight line. It's been shaped by my own experiences of struggle, healing, and searching for meaning, not just in therapy rooms, but in forests, in relationships, in stillness, in mess, and in movement.</p>
                                        <p>While talk therapy can be powerful, I don't believe it's the only, or always the best, path forward. Humans need connection—connection to loved ones, family, nature, community, and ourselves. This is helped by embodied practices, play, and conscious rest.</p>
                                        <a href="contact.html" class="cta-button">Book an Appointment</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Profile photo on the right -->
                        <div class="hero-image">
                            <img src="assets/img/aboutProfile.jpg" alt="Dr. Stephen Quigley" class="profile-img">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Features Section -->
    <section class="features-section py-5">
        <div class="container px-4 px-lg-5">
            <h2 class="section-title">Why Choose Dr. Stephen Quigley</h2>
            <p class="section-subtitle">My commitment to personalized care and evidence-based approaches, guided by genuine presence and connection.</p>
            
            <div class="row gx-4 gx-lg-5">
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-heart-pulse"></i>
                        </div>
                        <h3 class="feature-title">Holistic Approach</h3>
                        <p class="feature-content">I believe in addressing the whole person through connection to self, others, nature, and community—not just symptoms.</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <h3 class="feature-title">Person-Centered</h3>
                        <p class="feature-content">I meet you as a person, not a problem to be fixed, with over a decade of experience across diverse settings.</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <h3 class="feature-title">Evidence-Based</h3>
                        <p class="feature-content">My work draws from proven approaches like IFS, Compassion Focused Therapy, and ACT, guided by presence above all.</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-seedling"></i>
                        </div>
                        <h3 class="feature-title">Authentic Connection</h3>
                        <p class="feature-content">My own journey of healing and growth informs my practice, creating genuine understanding and support.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Services Section -->
    <section class="section__services py-5" style="background-color: #f8f9fa;">
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-10">
                    <h2 class="section-title">Services</h2>
                    <p class="section-subtitle">I offer a comprehensive range of psychological services tailored to your unique needs and journey.</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6 mb-4">
                            <a href="servicesAssessment.html" style="text-decoration: none; color: inherit;">
                                <div class="service-card" style="background-color: var(--kq-green); color: white; padding: 1.5rem; border-radius: 8px; transition: transform 0.3s ease; height: 100%;">
                                    <h3 style="color: white; font-size: 1.4rem; margin-bottom: 1rem;">Assessment Services</h3>
                                    <p style="margin-bottom: 1rem;">Comprehensive evaluations to understand your unique situation and develop personalized approaches.</p>
                                    <span style="color: var(--kq-greenLight); font-weight: 600;">Learn More →</span>
                                </div>
                            </a>
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <a href="servicesTreatment.html" style="text-decoration: none; color: inherit;">
                                <div class="service-card" style="background-color: var(--kq-green); color: white; padding: 1.5rem; border-radius: 8px; transition: transform 0.3s ease; height: 100%;">
                                    <h3 style="color: white; font-size: 1.4rem; margin-bottom: 1rem;">Therapeutic Support</h3>
                                    <p style="margin-bottom: 1rem;">Evidence-based therapeutic services guided by presence and genuine human connection.</p>
                                    <span style="color: var(--kq-greenLight); font-weight: 600;">Learn More →</span>
                                </div>
                            </a>
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <a href="servicesConsultation.html" style="text-decoration: none; color: inherit;">
                                <div class="service-card" style="background-color: var(--kq-green); color: white; padding: 1.5rem; border-radius: 8px; transition: transform 0.3s ease; height: 100%;">
                                    <h3 style="color: white; font-size: 1.4rem; margin-bottom: 1rem;">Professional Consultation</h3>
                                    <p style="margin-bottom: 1rem;">Expert consultations for practitioners, organizations, and educational institutions.</p>
                                    <span style="color: var(--kq-greenLight); font-weight: 600;">Learn More →</span>
                                </div>
                            </a>
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <a href="servicesWorkshops.html" style="text-decoration: none; color: inherit;">
                                <div class="service-card" style="background-color: var(--kq-green); color: white; padding: 1.5rem; border-radius: 8px; transition: transform 0.3s ease; height: 100%;">
                                    <h3 style="color: white; font-size: 1.4rem; margin-bottom: 1rem;">Workshops & Training</h3>
                                    <p style="margin-bottom: 1rem;">Educational opportunities grounded in connection, presence, and evidence-based practice.</p>
                                    <span style="color: var(--kq-greenLight); font-weight: 600;">Learn More →</span>
                                </div>
                            </a>
                        </div>
                    </div>
                    
                    <div class="text-center mt-4">
                        <a href="services.html" class="cta-button">View All Services</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- CTA Section -->
    <section class="py-5" style="background-color: #f0f5f0;">
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-8 text-center">
                    <h2 style="color: var(--kq-green); font-size: 2rem; margin-bottom: 1.5rem;">Ready to Begin Your Journey?</h2>
                    <p style="margin-bottom: 2rem; font-size: 1.1rem;">I'm here to meet you where you are and support you through life's complexities with understanding, presence, and professional guidance.</p>
                    <a href="contact.html" class="cta-button">Book an Appointment</a>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Include footer -->
    <div id="footer-placeholder"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/scripts.js"></script>

<!-- Script to load header and footer -->
<script>
    // Load header and footer
    fetch('header.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('header-placeholder').innerHTML = data;
        })
        .catch(error => {
            console.error('Error loading header:', error);
        });
    
    fetch('footer.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('footer-placeholder').innerHTML = data;
        })
        .catch(error => {
            console.error('Error loading footer:', error);
        });

    // Google Sheets content loading script
    document.addEventListener('DOMContentLoaded', loadAboutContent);

    function loadAboutContent() {
        const CACHE_KEY = 'about_content_cache';
        const CACHE_DURATION = 3600000; // 1 hour in milliseconds
        const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSZ0XqHi0qZQPJxRhu0mLjx7jhTT6AVLH_NZ6fHlHX41SxzILZmHp7LtWD-r0UTfUMGAkcPwp8FTuCa/pub?output=csv";
        
        const loadingElement = document.getElementById('loading-about');
        const contentElement = document.getElementById('about-content');
        const fallbackElement = document.getElementById('about-fallback');
        
        // Check cache first
        const cachedData = localStorage.getItem(CACHE_KEY);
        if (cachedData) {
            try {
                const { content, timestamp } = JSON.parse(cachedData);
                const age = Date.now() - timestamp;
                
                if (age < CACHE_DURATION) {
                    displayContent(content);
                    return;
                }
            } catch (error) {
                console.error('Error parsing cache:', error);
                // Continue to fetch if cache parsing fails
            }
        }
        
        // Fetch content from Google Sheets
        fetch(csvUrl)
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.text();
            })
            .then(csvText => {
                try {
                    // Parse the CSV properly including handling quoted values
                    const parsedContent = parseCSV(csvText);
                    if (parsedContent && parsedContent.length >= 2 && parsedContent[1].length > 0) {
                        const contentValue = parsedContent[1][0]; // Get first column of second row
                        
                        // Cache the content
                        try {
                            localStorage.setItem(CACHE_KEY, JSON.stringify({
                                content: contentValue,
                                timestamp: Date.now()
                            }));
                        } catch (error) {
                            console.error('Error caching content:', error);
                            // Continue even if caching fails
                        }
                        
                        displayContent(contentValue);
                    } else {
                        showFallback();
                    }
                } catch (error) {
                    console.error('Error parsing CSV:', error);
                    showFallback();
                }
            })
            .catch(error => {
                console.error('Error fetching content:', error);
                showFallback();
            });
            
        function displayContent(content) {
            try {
                // Split content by line breaks and create separate paragraphs
                const paragraphs = content.split(/\n\s*\n|\n/).filter(para => para.trim().length > 0);
                
                // Create HTML for each paragraph
                const paragraphsHTML = paragraphs.map(para => `<p>${para.trim()}</p>`).join('');
                
                contentElement.innerHTML = `
                    ${paragraphsHTML}
                    <a href="contact.html" class="cta-button">Book an Appointment</a>
                `;
                loadingElement.style.display = 'none';
                contentElement.style.display = 'block';
            } catch (error) {
                console.error('Error displaying content:', error);
                showFallback();
            }
        }
        
        function showFallback() {
            try {
                loadingElement.style.display = 'none';
                fallbackElement.style.display = 'block';
            } catch (error) {
                console.error('Error showing fallback:', error);
            }
        }
        
        // Proper CSV parser that handles quoted cells with line breaks
        function parseCSV(csvText) {
            const result = [];
            let row = [];
            let currentValue = '';
            let insideQuotes = false;
            
            for (let i = 0; i < csvText.length; i++) {
                const char = csvText[i];
                const nextChar = csvText[i + 1];
                
                if (char === '"') {
                    if (insideQuotes && nextChar === '"') {
                        // Escaped quote inside quotes
                        currentValue += '"';
                        i++; // Skip the next quote
                    } else {
                        // Toggle quote state
                        insideQuotes = !insideQuotes;
                    }
                } else if (char === ',' && !insideQuotes) {
                    // End of field
                    row.push(currentValue);
                    currentValue = '';
                } else if ((char === '\r' || char === '\n') && !insideQuotes) {
                    // End of line
                    if (currentValue !== '' || row.length > 0) {
                        row.push(currentValue);
                        result.push(row);
                        row = [];
                        currentValue = '';
                    }
                    
                    // Skip the next character if it's a line feed after a carriage return
                    if (char === '\r' && nextChar === '\n') {
                        i++;
                    }
                } else {
                    // Regular character
                    currentValue += char;
                }
            }
            
            // Don't forget the last row
            if (currentValue !== '' || row.length > 0) {
                row.push(currentValue);
                result.push(row);
            }
            
            return result;
        }
    }
    
    // Add simple hover effect for service cards
    document.addEventListener('DOMContentLoaded', function() {
        const serviceCards = document.querySelectorAll('.service-card');
        
        serviceCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.boxShadow = '0 8px 16px rgba(0,0,0,0.15)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';
            });
        });
    });
</script>
</body>
</html>